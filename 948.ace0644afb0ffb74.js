"use strict";(self.webpackChunkwork=self.webpackChunkwork||[]).push([[948],{3948:(xe,p,s)=>{s.r(p),s.d(p,{ReactiveFormsPageComponent:()=>Ce});var d=s(6895),i=s(433),u=s(8505),C=s(8675),g=s(4482),_=s(5403),x=s(8737),y=s(9300);function h(o=[]){return({value:t})=>{const n=o.find(a=>a.toLowerCase()===t?.toLowerCase());return n?{banWords:{bannedWord:n}}:null}}function q(o){const t=o.get("password"),n=o.get("confirmPassword"),r={passwordShouldMatch:{mismatch:!0}};return t?.value===n?.value?null:(n?.setErrors(r),r)}var e=s(1571),v=s(9646),b=s(4986),k=s(7272),Z=s(5698),A=s(5032),I=s(9718),U=s(5577);function T(o,t){return t?n=>(0,k.z)(t.pipe((0,Z.q)(1),function P(){return(0,g.e)((o,t)=>{o.subscribe((0,_.x)(t,A.Z))})}()),n.pipe(T(o))):(0,U.z)((n,r)=>o(n,r).pipe((0,Z.q)(1),(0,I.h)(n)))}var F=s(5963);let Q=(()=>{class o{getSkills(){return(0,v.of)(["angular","typescript","git","docker"]).pipe(function w(o,t=b.z){const n=(0,F.H)(o,t);return T(()=>n)}(1e3))}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=s(4004),Y=s(262),J=s(529);let E=(()=>{class o{constructor(n){this.http=n}validate({value:n}){const r={uniqueName:{isTaken:!0}},a={uniqueName:{unknownError:!0}};return this.http.get(`https://jsonplaceholder.typicode.com/users?username=${n}`).pipe((0,R.U)(({length:l})=>0===l?null:r),(0,Y.K)(()=>(0,v.of)(a)))}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(J.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function O(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function S(o,t){if(1&o&&(e.TgZ(0,"div",41),e._uU(1," The value "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," is banned "),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n.getError("banWords").bannedWord)}}function M(o,t){if(1&o&&(e.TgZ(0,"div",41),e._uU(1," The name must be at least "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," characters "),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n.getError("minlength").requiredLength)}}function L(o,t){if(1&o&&(e.ynx(0),e.YNc(1,O,2,0,"div",40),e.YNc(2,S,5,1,"div",40),e.YNc(3,M,5,1,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("banWords")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("minlength"))}}function D(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function G(o,t){if(1&o&&(e.TgZ(0,"div",41),e._uU(1," The last name must be at least "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," characters "),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n.getError("minlength").requiredLength)}}function B(o,t){if(1&o&&(e.ynx(0),e.YNc(1,D,2,0,"div",40),e.YNc(2,G,5,1,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("minlength"))}}function V(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function W(o,t){if(1&o&&(e.TgZ(0,"div",41),e._uU(1," The nickname must be at least "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," characters "),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n.getError("minlength").requiredLength)}}function $(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," Only letters, numbers, _ and . is allowed "),e.qZA())}function j(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This nickname is already taken "),e.qZA())}function z(o,t){1&o&&(e.TgZ(0,"div",43),e._uU(1,"Checking nickname..."),e.qZA())}function K(o,t){if(1&o&&(e.ynx(0),e.YNc(1,V,2,0,"div",40),e.YNc(2,W,5,1,"div",40),e.YNc(3,$,2,0,"div",40),e.YNc(4,j,2,0,"div",40),e.YNc(5,z,2,0,"div",42),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("uniqueName")),e.xp6(1),e.Q6J("ngIf",n.pending)}}function H(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1,"This field is required"),e.qZA())}function X(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1,"The email is not valid"),e.qZA())}function ee(o,t){if(1&o&&(e.ynx(0),e.YNc(1,H,2,0,"div",40),e.YNc(2,X,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("email"))}}function ne(o,t){if(1&o&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&o){const n=t.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function oe(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," Allowed format is: AB123456 "),e.qZA())}function te(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function re(o,t){if(1&o&&(e.ynx(0),e.YNc(1,oe,2,0,"div",40),e.YNc(2,te,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required"))}}function ie(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function ae(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ie,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required"))}}function se(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1,"This field is required"),e.qZA())}function le(o,t){if(1&o&&(e.ynx(0),e.YNc(1,se,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required"))}}function ce(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function me(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ce,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required"))}}function de(o,t){if(1&o&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&o){const n=t.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function fe(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",45)(1,"label",46),e._uU(2,"Phone number"),e.qZA(),e.TgZ(3,"div",47)(4,"select",48),e.YNc(5,de,2,2,"option",15),e.qZA(),e._UZ(6,"input",49),e.TgZ(7,"button",50),e.NdJ("click",function(){const l=e.CHM(n).index,f=e.oxw();return e.KtG(f.onRemovePhoneClick(l))}),e._uU(8,"-"),e.qZA()()()}if(2&o){const n=t.index,r=e.oxw();e.Q6J("formGroupName",n),e.xp6(1),e.MGl("for","phone-",n,""),e.xp6(4),e.Q6J("ngForOf",r.phoneLabels),e.xp6(1),e.MGl("id","phone-",n,"")}}function ue(o,t){if(1&o&&(e.TgZ(0,"div",52),e._UZ(1,"input",53),e.TgZ(2,"label",46),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()),2&o){const n=t.$implicit;e.xp6(1),e.Q6J("formControlName",n)("id",n),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Oqu(e.lcZ(4,4,n))}}function pe(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ue,5,6,"div",51),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function ge(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," This field is required "),e.qZA())}function _e(o,t){if(1&o&&(e.TgZ(0,"div",41),e._uU(1," Password should be at least "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," characters "),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n.getError("minlength").requiredLength)}}function he(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ge,2,0,"div",40),e.YNc(2,_e,5,1,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.dirty&&n.hasError("minlength"))}}function ve(o,t){1&o&&(e.TgZ(0,"div",41),e._uU(1," Password doesn't match "),e.qZA())}function Ze(o,t){if(1&o&&(e.ynx(0),e.YNc(1,ve,2,0,"div",40),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",n.hasError("passwordShouldMatch")&&n.dirty)}}function Te(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"Skills are loading..."),e.qZA())}let Ce=(()=>{class o{constructor(n,r,a,l){this.userSkills=n,this.fb=r,this.uniqueNickname=a,this.cdr=l,this.phoneLabels=["Main","Mobile","Work","Home"],this.years=this.getYears(),this.form=this.fb.group({firstName:["Kostya",[i.kI.required,i.kI.minLength(4),h(["test","dummy"])]],lastName:["Kifor",[i.kI.required,i.kI.minLength(2)]],nickname:["kskifor",{validators:[i.kI.required,i.kI.minLength(2),i.kI.pattern(/^[\w.]+$/),h(["dummy","anonymous"])],asyncValidators:[this.uniqueNickname.validate.bind(this.uniqueNickname)],updateOn:"blur"}],email:["k.kifor@tenantcloud.com",[i.kI.email,i.kI.required]],yearOfBirth:this.fb.nonNullable.control(2010,i.kI.required),passport:["",[i.kI.pattern(/^[A-Z]{2}[0-9]{6}$/)]],address:this.fb.nonNullable.group({fullAddress:["Address",i.kI.required],city:["City",i.kI.required],postCode:["002342",i.kI.required]}),phones:this.fb.array([this.fb.group({label:this.fb.nonNullable.control(this.phoneLabels[0]),phone:"+380637575096"})]),skills:this.fb.record({}),password:this.fb.group({password:["123456",[i.kI.required,i.kI.minLength(6)]],confirmPassword:"123456"},{validators:q})})}ngOnInit(){this.setData()}ngOnDestroy(){this.ageValidators.unsubscribe(),this.formPendingState.unsubscribe()}onAddPhoneClick(){this.form.controls.phones.insert(0,new i.cw({label:new i.NI(this.phoneLabels[0],{nonNullable:!0}),phone:new i.NI("")}))}onRemovePhoneClick(n){this.form.controls.phones.removeAt(n)}onSubmit(n){console.log(n),console.log(this.form.value),this.initialFormValues=this.form.value,this.formDir.resetForm(this.form.value)}onReset(n){console.log(n),n.preventDefault(),this.formDir.resetForm({})}onInitialDataClick(){this.formDir.resetForm(this.initialFormValues)}getYears(){const n=(new Date).getUTCFullYear();return Array(n-(n-40)).fill("").map((r,a)=>n-a)}buildSkillControls(n){n.forEach(r=>this.form.controls.skills.addControl(r,new i.NI(!1,{nonNullable:!0})))}isAdult(n){return(new Date).getFullYear()-n>=18}setData(){this.skills$=this.userSkills.getSkills().pipe((0,u.b)(n=>this.buildSkillControls(n)),(0,u.b)(()=>this.initialFormValues=this.form.value)),this.ageValidators=this.form.controls.yearOfBirth.valueChanges.pipe((0,u.b)(()=>this.form.controls.passport.markAsDirty()),(0,C.O)(this.form.controls.yearOfBirth.value)).subscribe(n=>{this.isAdult(n)?this.form.controls.passport.addValidators(i.kI.required):this.form.controls.passport.removeValidators(i.kI.required),this.form.controls.passport.updateValueAndValidity()}),this.formPendingState=this.form.statusChanges.pipe(function N(o,t=null){return t=t??o,(0,g.e)((n,r)=>{let a=[],l=0;n.subscribe((0,_.x)(r,f=>{let c=null;l++%t==0&&a.push([]);for(const m of a)m.push(f),o<=m.length&&(c=c??[],c.push(m));if(c)for(const m of c)(0,x.P)(a,m),r.next(m)},()=>{for(const f of a)r.next(f);r.complete()},void 0,()=>{a=null}))})}(2,1),(0,y.h)(([n])=>"PENDING"===n)).subscribe(()=>this.cdr.markForCheck())}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(Q),e.Y36(i.qu),e.Y36(E),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reactive-forms-page"]],viewQuery:function(n,r){if(1&n&&e.Gf(i.sg,5),2&n){let a;e.iGM(a=e.CRH())&&(r.formDir=a.first)}},standalone:!0,features:[e.jDz],decls:83,vars:18,consts:[[1,"form",3,"formGroup","reset","ngSubmit"],[1,"form-field"],["for","name"],["formControlName","firstName","type","text","id","name","placeholder","Enter your name"],[4,"ngIf"],["for","last-name"],["formControlName","lastName","type","text","id","last-name","placeholder","Enter your last name"],["for","nickname"],["formControlName","nickname","type","text","id","nickname","placeholder","Come up with a nickname"],["for","email"],["formControlName","email","type","email","id","email","placeholder","Provide your email"],[1,"form-field-inline-group"],[1,"form-field","form-field-small"],["for","year-of-birth"],["formControlName","yearOfBirth","id","year-of-birth"],[3,"value",4,"ngFor","ngForOf"],["for","passport"],["formControlName","passport","type","text","id","passport","placeholder","Provide Passport Data"],["formGroupName","address"],["for","full-address"],["formControlName","fullAddress","type","text","id","full-address","placeholder","Street name and house number"],["for","city"],["formControlName","city","type","text","id","city","placeholder","City"],["for","post-code"],["formControlName","postCode","type","number","id","post-code","placeholder","Post code"],["formArrayName","phones"],[1,"control-buttons"],["type","button",1,"add-button",3,"click"],["class","form-field",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","skills"],[4,"ngIf","ngIfElse"],["formGroupName","password"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Enter password..."],["for","confirm-password"],["formControlName","confirmPassword","type","password","id","confirm-password","placeholder","Enter password..."],[3,"disabled"],["type","reset",1,"reset-button"],["type","button",1,"reset-button",3,"click"],["loading",""],["class","input-error",4,"ngIf"],[1,"input-error"],["class","input-info",4,"ngIf"],[1,"input-info"],[3,"value"],[1,"form-field",3,"formGroupName"],[3,"for"],[1,"control-container"],["formControlName","label",1,"phone-label-dropdown"],["formControlName","phone","type","text","placeholder","Enter Phone Number",3,"id"],["type","button",1,"remove-button",3,"click"],["class","skill-container",4,"ngFor","ngForOf"],[1,"skill-container"],["type","checkbox",3,"formControlName","id"]],template:function(n,r){if(1&n&&(e.TgZ(0,"form",0),e.NdJ("reset",function(l){return r.onReset(l)})("ngSubmit",function(l){return r.onSubmit(l)}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"First Name"),e.qZA(),e._UZ(4,"input",3),e.YNc(5,L,4,3,"ng-container",4),e.qZA(),e.TgZ(6,"div",1)(7,"label",5),e._uU(8,"Last Name"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,B,3,2,"ng-container",4),e.qZA(),e.TgZ(11,"div",1)(12,"label",7),e._uU(13,"Nickname"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,K,6,5,"ng-container",4),e.qZA(),e.TgZ(16,"div",1)(17,"label",9),e._uU(18,"Email"),e.qZA(),e._UZ(19,"input",10),e.YNc(20,ee,3,2,"ng-container",4),e.qZA(),e.TgZ(21,"div",11)(22,"div",12)(23,"label",13),e._uU(24,"Year of birth"),e.qZA(),e.TgZ(25,"select",14),e.YNc(26,ne,2,2,"option",15),e.qZA()(),e.TgZ(27,"div",12)(28,"label",16),e._uU(29,"Passport Number"),e.qZA(),e._UZ(30,"input",17),e.YNc(31,re,3,2,"ng-container",4),e.qZA()(),e.TgZ(32,"fieldset",18)(33,"legend"),e._uU(34,"Address"),e.qZA(),e.TgZ(35,"div",1)(36,"label",19),e._uU(37,"Full Address"),e.qZA(),e._UZ(38,"input",20),e.YNc(39,ae,2,1,"ng-container",4),e.qZA(),e.TgZ(40,"div",1)(41,"label",21),e._uU(42,"City"),e.qZA(),e._UZ(43,"input",22),e.YNc(44,le,2,1,"ng-container",4),e.qZA(),e.TgZ(45,"div",1)(46,"label",23),e._uU(47,"Post Code"),e.qZA(),e._UZ(48,"input",24),e.YNc(49,me,2,1,"ng-container",4),e.qZA()(),e.TgZ(50,"fieldset",25)(51,"legend"),e._uU(52,"Phones"),e.qZA(),e.TgZ(53,"div",26)(54,"button",27),e.NdJ("click",function(){return r.onAddPhoneClick()}),e._uU(55,"+"),e.qZA()(),e.YNc(56,fe,9,4,"div",28),e.qZA(),e.TgZ(57,"fieldset",29)(58,"legend"),e._uU(59,"User Skills"),e.qZA(),e.YNc(60,pe,2,1,"ng-container",30),e.ALo(61,"async"),e.qZA(),e.TgZ(62,"fieldset",31)(63,"legend"),e._uU(64,"Password"),e.qZA(),e.TgZ(65,"div",1)(66,"label",32),e._uU(67,"Create Password"),e.qZA(),e._UZ(68,"input",33),e.YNc(69,he,3,2,"ng-container",4),e.qZA(),e.TgZ(70,"div",1)(71,"label",34),e._uU(72,"Confirm Password"),e.qZA(),e._UZ(73,"input",35),e.YNc(74,Ze,2,1,"ng-container",4),e.qZA()(),e.TgZ(75,"button",36),e._uU(76,"Save"),e.qZA(),e.TgZ(77,"button",37),e._uU(78,"Reset"),e.qZA(),e.TgZ(79,"button",38),e.NdJ("click",function(){return r.onInitialDataClick()}),e._uU(80,"Initial data"),e.qZA()(),e.YNc(81,Te,2,0,"ng-template",null,39,e.W1O)),2&n){const a=e.MAs(82);e.Q6J("formGroup",r.form),e.xp6(5),e.Q6J("ngIf",r.form.controls.firstName),e.xp6(5),e.Q6J("ngIf",r.form.controls.lastName),e.xp6(5),e.Q6J("ngIf",r.form.controls.nickname),e.xp6(5),e.Q6J("ngIf",r.form.controls.email),e.xp6(6),e.Q6J("ngForOf",r.years),e.xp6(5),e.Q6J("ngIf",r.form.controls.passport),e.xp6(8),e.Q6J("ngIf",r.form.controls.address.controls.fullAddress),e.xp6(5),e.Q6J("ngIf",r.form.controls.address.controls.city),e.xp6(5),e.Q6J("ngIf",r.form.controls.address.controls.postCode),e.xp6(7),e.Q6J("ngForOf",r.form.controls.phones.controls),e.xp6(4),e.Q6J("ngIf",e.lcZ(61,16,r.skills$))("ngIfElse",a),e.xp6(9),e.Q6J("ngIf",r.form.controls.password.controls.password),e.xp6(5),e.Q6J("ngIf",r.form.controls.password.controls.confirmPassword),e.xp6(1),e.Q6J("disabled",r.form.invalid||r.form.pending)}},dependencies:[d.ez,d.sg,d.O5,d.Ov,d.rS,i.UX,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;justify-content:center;align-items:center;width:100%}",".form[_ngcontent-%COMP%]{min-width:395px}.form-field[_ngcontent-%COMP%]{width:100%;height:93px}.form-field-small[_ngcontent-%COMP%]{max-width:48%}.form-field-inline-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}",".add-button[_ngcontent-%COMP%]{width:46px;padding:5px}.control-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:var(--spacing-step)}.control-container[_ngcontent-%COMP%]{display:flex;align-items:center}.remove-button[_ngcontent-%COMP%]{width:50px;min-width:45px;margin:0 0 0 10px;color:var(--color-error);background-color:transparent;border-color:var(--color-error)}.phone-label-dropdown[_ngcontent-%COMP%]{width:110px;margin-right:var(--spacing-step)}.skill-container[_ngcontent-%COMP%]{display:flex;align-items:center}"],changeDetection:0}),o})()}}]);